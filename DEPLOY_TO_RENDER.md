# Deploy Django Project to Render - Step by Step

## Your Repository
- **GitHub:** `hesamsaeedi55/myshop2`
- **Django Project Path:** `myshop2/myshop/`
- **Requirements:** `myshop2/myshop/requirements.txt`

---

## Step 1: Create Render Account & Connect GitHub

1. Go to [dashboard.render.com](https://dashboard.render.com)
2. Click **"Get Started"** or **"Sign Up"**
3. **Sign up with GitHub** (easiest - one click!)
4. Authorize Render to access your repositories

---

## Step 2: Create PostgreSQL Database

1. In Render dashboard, click **"New +"** ‚Üí **"PostgreSQL"**
2. Configure:
   - **Name:** `myshop2-db`
   - **Database:** `myshop2`
   - **User:** `myshop2`
   - **Region:** `Oregon (US West)` (or closest to you)
   - **PostgreSQL Version:** `16`
   - **Plan:** **Free**
3. Click **"Create Database"**
4. Wait 2-3 minutes
5. **Copy the Internal Database URL** (you'll need it!)

---

## Step 3: Create Web Service

1. Click **"New +"** ‚Üí **"Web Service"**
2. Connect to GitHub repository: **`hesamsaeedi55/myshop2`**
3. Configure:

### Basic Settings:
- **Name:** `myshop2` (or your preferred name)
- **Region:** Same as your database
- **Branch:** `main` (or your default branch)
- **Root Directory:** `myshop2/myshop` ‚ö†Ô∏è **IMPORTANT!**
- **Environment:** `Python 3`
- **Build Command:**
  ```bash
  pip install -r requirements.txt && python manage.py makemigrations image_editor && python manage.py migrate --no-input && python manage.py collectstatic --no-input
  ```
- **Start Command:**
  ```bash
  gunicorn myshop.wsgi:application
  ```
- **Instance Type:** **Free**

### Environment Variables:
Click **"Add Environment Variable"** and add:

1. **`SECRET_KEY`**
   - Click **"Generate"** or create a secure random string
   - Example: Use Django's secret key generator

2. **`DATABASE_URL`**
   - Paste the **Internal Database URL** from Step 2
   - Format: `postgresql://user:password@host:port/dbname`

3. **`PYTHON_VERSION`** = `3.10` (or `3.11`)

4. **`WEB_CONCURRENCY`** = `4`

4. Click **"Create Web Service"**

---

## Step 4: Wait for Deployment

- First deployment takes **5-10 minutes**
- Watch the **"Logs"** tab for progress
- When you see: `"Your service is live at https://myshop2.onrender.com"` ‚Üí **Success!** ‚úÖ

---

## Step 5: Create Admin User

After deployment succeeds:

1. Go to your Web Service ‚Üí **"Shell"** tab
2. Run:
   ```bash
   python manage.py createsuperuser
   ```
3. Enter:
   - Username
   - Email
   - Password (twice)
4. Save the credentials!

5. Access admin: `https://myshop2.onrender.com/admin/`

---

## Step 6: Test Your Deployment

- **Homepage:** `https://myshop2.onrender.com/`
- **Admin:** `https://myshop2.onrender.com/admin/`
- **API:** Check your API endpoints

---

## Important Notes

### Root Directory
‚ö†Ô∏è **CRITICAL:** Set Root Directory to `myshop2/myshop` in Render settings!
- This tells Render where your Django project is located
- All build/start commands will run from this directory

### Database Connection
- Use **Internal Database URL** (not External)
- This URL is only accessible from within Render's network
- Format: `postgresql://user:password@host:port/dbname`

### Free Tier Limitations
- ‚ö†Ô∏è Service spins down after 15 minutes of inactivity
- ‚ö†Ô∏è First request after spin-down takes 30-60 seconds
- ‚ö†Ô∏è 750 hours/month free (enough for always-on on free tier)
- ‚ö†Ô∏è 512 MB RAM

---

## Troubleshooting

### Build Fails
1. Check **"Logs"** tab for errors
2. Verify **Root Directory** is set correctly
3. Check **Build Command** paths
4. Verify `requirements.txt` exists in `myshop2/myshop/`

### Database Connection Error
1. Verify `DATABASE_URL` environment variable is set
2. Check database status (should be "Available")
3. Use Internal Database URL (not External)
4. Verify database name/user match

### Static Files Not Loading
1. Check `collectstatic` runs in build command
2. Verify `STATIC_ROOT` in settings.py
3. Check static files URL configuration

### 500 Error After Deployment
1. Check **"Logs"** for Python errors
2. Verify all environment variables are set
3. Check `SECRET_KEY` is set
4. Verify migrations completed successfully

---

## Environment Variables Reference

```bash
# Required
SECRET_KEY=<auto-generated or random string>
DATABASE_URL=<from database Internal URL>
PYTHON_VERSION=3.10
WEB_CONCURRENCY=4

# Optional - Email (if using)
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-password
DEFAULT_FROM_EMAIL=your-email@gmail.com

# Optional - AWS S3 (if using for media files)
AWS_ACCESS_KEY_ID=your-key
AWS_SECRET_ACCESS_KEY=your-secret
AWS_STORAGE_BUCKET_NAME=your-bucket
AWS_S3_REGION_NAME=us-east-1
```

---

## Quick Commands Reference

```bash
# View logs (in Render Dashboard ‚Üí Service ‚Üí Logs)

# Run migrations manually
python manage.py migrate

# Create superuser
python manage.py createsuperuser

# Collect static files
python manage.py collectstatic --no-input

# Access shell (in Render Dashboard ‚Üí Service ‚Üí Shell)
```

---

## Auto-Deploy

‚úÖ **Auto-deploy is enabled by default!**

Every time you push to GitHub:
- Render detects the change
- Starts a new deployment
- Runs migrations automatically (if in build command)
- Deploys latest code
- Updates in 3-5 minutes!

---

## Summary Checklist

- [ ] Created Render account
- [ ] Connected GitHub account
- [ ] Created PostgreSQL database
- [ ] Created Web Service
- [ ] Set Root Directory to `myshop2/myshop`
- [ ] Configured Build Command
- [ ] Configured Start Command
- [ ] Added environment variables (`SECRET_KEY`, `DATABASE_URL`, etc.)
- [ ] Deployment completed successfully
- [ ] Created superuser
- [ ] Tested homepage and admin panel

---

## Your App URLs

- **App:** `https://myshop2.onrender.com`
- **Admin:** `https://myshop2.onrender.com/admin/`

üéâ **Congratulations! Your Django app is now live on Render!**

