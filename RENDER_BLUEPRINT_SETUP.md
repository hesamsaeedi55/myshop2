# Render Blueprint Setup Guide

## What is a Blueprint?

A **Blueprint** is a YAML configuration file (`render.yaml`) that tells Render exactly how to deploy your application. Instead of manually configuring services in the UI, you define everything in code!

**Advantages:**
- ‚úÖ Everything in one file (easier to version control)
- ‚úÖ Reproducible deployments
- ‚úÖ Can be committed to GitHub
- ‚úÖ One-click deployment setup

---

## üìÑ File Created: `render.yaml`

I've created a `render.yaml` file in your repository root with:

1. **PostgreSQL Database** configuration
2. **Django Web Service** configuration
3. All environment variables
4. Build and start commands

---

## üöÄ How to Use the Blueprint

### Step 1: Commit the File to GitHub

The `render.yaml` file needs to be in your GitHub repository:

```bash
# Make sure you're in your repository root
cd /Users/hesamoddinsaeedi/Desktop/best/backup\ copy\ 64

# Add the file
git add render.yaml

# Commit it
git commit -m "Add Render blueprint configuration"

# Push to GitHub
git push origin main
```

### Step 2: Deploy Using Blueprint

1. Go to [https://dashboard.render.com/blueprint/new](https://dashboard.render.com/blueprint/new)
2. Select your repository: `hesamsaeedi55/myshop2`
3. Click **"Apply"**
4. Render will:
   - Read your `render.yaml` file
   - Create the PostgreSQL database
   - Create the web service
   - Set all environment variables
   - Deploy everything automatically!

---

## üìã What's in `render.yaml`

### PostgreSQL Database:
```yaml
- type: postgresql
  name: myshop2-db
  plan: free
  databaseName: myshop2
  databaseUser: myshop2_user
  region: oregon
```

### Django Web Service:
```yaml
- type: web
  name: myshop2
  runtime: python
  buildCommand: (installs dependencies, runs migrations, collects static files)
  startCommand: (starts gunicorn)
  envVars: (SECRET_KEY, DATABASE_URL, PYTHON_VERSION, etc.)
```

---

## ‚öôÔ∏è Configuration Details

### Build Command:
Runs from repository root:
```bash
pip install -r myshop2/myshop/requirements.txt && \
cd myshop2/myshop && \
python manage.py makemigrations image_editor && \
python manage.py migrate --no-input && \
python manage.py collectstatic --no-input
```

### Start Command:
```bash
cd myshop2/myshop && gunicorn myshop.wsgi:application
```

### Environment Variables:
- `SECRET_KEY`: Auto-generated by Render
- `DATABASE_URL`: Automatically linked from PostgreSQL service
- `PYTHON_VERSION`: Set to 3.10.0
- `WEB_CONCURRENCY`: Set to 4
- `DJANGO_SETTINGS_MODULE`: Set to `myshop.settings`

---

## üîÑ Alternative: Manual Setup (Without Blueprint)

If you prefer **NOT** to use the blueprint:

1. Go to [https://dashboard.render.com](https://dashboard.render.com)
2. Click **"New +"** ‚Üí **"Web Service"** (not Blueprint)
3. Follow the manual setup guide: `RENDER_GITHUB_SETUP_GUIDE.md`

Both methods work the same! Blueprint is just more automated.

---

## ‚úÖ Next Steps

1. **Commit `render.yaml` to GitHub:**
   ```bash
   git add render.yaml
   git commit -m "Add Render blueprint"
   git push origin main
   ```

2. **Go to Render Blueprint page:**
   - [https://dashboard.render.com/blueprint/new](https://dashboard.render.com/blueprint/new)

3. **Select your repository and deploy!**

---

## üêõ Troubleshooting

### "No render.yaml found"
- Make sure `render.yaml` is committed and pushed to GitHub
- Check it's in the **repository root** (not in a subdirectory)
- Verify the file name is exactly `render.yaml` (lowercase)

### Build Fails
- Check the logs in Render dashboard
- Verify `myshop2/myshop/requirements.txt` exists
- Ensure build command paths are correct

### Database Connection Error
- Verify `DATABASE_URL` is automatically set (it should be via `fromDatabase`)
- Check database service name matches: `myshop2-db`

---

## üìù File Location

The `render.yaml` file should be at:
```
/Users/hesamoddinsaeedi/Desktop/best/backup copy 64/render.yaml
```

And in GitHub at:
```
hesamsaeedi55/myshop2/render.yaml (root of repository)
```

---

**That's it!** Once you commit and push `render.yaml`, you can use the Blueprint feature on Render! üéâ

